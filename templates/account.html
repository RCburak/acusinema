{% extends "base.html" %}
{% load static %}

{% block title %}Account{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'login-register.css' %}">
    <style>
        /* Styles for form validation errors (.errorlist) */
        .form-section .errorlist {
            list-style-type: none;
            padding: 10px 15px;
            margin: 0 0 15px 0;
            color: #FF5722; /* Error color */
            font-size: 0.9em;
            text-align: left;
            background-color: rgba(255, 87, 34, 0.1);
            border: 1px solid #FF5722;
            border-radius: 6px;
        }
        .form-section .errorlist li {
            padding: 2px 0;
        }

        /* Styles for success/error messages (messages framework) */
        .alert-message {
            padding: 15px;
            color: white;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }
        .alert-success {
            background-color: #28a745; /* Green */
        }
        .alert-error {
            background-color: #dc3545; /* Red */
        }
    </style>
{% endblock %}

{% block content %}
<main class="main-content-wrapper">
    <div class="account-container">
        <div class="form-wrapper">
            <div class="form-tabs">
                {# Changed tab labels to English #}
                <button class="tab-link" data-form="login">Login</button>
                <button class="tab-link" data-form="register">Register</button>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert-message {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %}">
                        {{ message }} {# Messages now come from views.py in English #}
                    </div>
                {% endfor %}
            {% endif %}

            <div id="login-form-wrapper" class="form-section">
                <form id="login-form" method="POST">
                    {% csrf_token %}
                    {{ login_form.as_p }} {# Form field labels come from forms.py in English #}
                    {# Changed button text to English #}
                    <button type="submit" name="login_submit" class="form-submit-btn">Login</button>
                </form>
            </div>

            <div id="register-form-wrapper" class="form-section">
                <form id="register-form" method="POST">
                    {% csrf_token %}
                    {{ register_form.as_p }} {# Form field labels come from forms.py in English #}
                     {# Changed button text to English #}
                    <button type="submit" name="register_submit" class="form-submit-btn">Register</button>
                </form>
            </div>
        </div>
    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabLinks = document.querySelectorAll('.tab-link');
        const formSections = document.querySelectorAll('.form-section');

        const activeTab = '{{ active_tab|default:"login" }}';

        tabLinks.forEach(link => {
            const formName = link.dataset.form;
            const formWrapper = document.getElementById(formName + '-form-wrapper');

            if (formName === activeTab) {
                link.classList.add('active');
                formWrapper.classList.add('active');
            } else {
                link.classList.remove('active');
                formWrapper.classList.remove('active');
            }

            link.addEventListener('click', (e) => {
                e.preventDefault();
                const formId = link.dataset.form + '-form-wrapper';

                tabLinks.forEach(item => item.classList.remove('active'));
                formSections.forEach(section => section.classList.remove('active'));

                link.classList.add('active');
                document.getElementById(formId).classList.add('active');
            });
        });
    });
</script>
{% endblock %}